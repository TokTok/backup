{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Contact Details (e.g. Tox ID or email)\r\n\r\n_No response_\r\n\r\n### qTox Version\r\n\r\nv1.17.90-2-g037ac452\r\n\r\n### Commit Hash\r\n\r\n037ac452214d18b8af868b74ac7349ade0458467\r\n\r\n### Toxcore Version\r\n\r\n0.2.20\r\n\r\n### Qt Version\r\n\r\n6.7.2\r\n\r\n### Steps to reproduce\r\n\r\n1. Start qTox (with ASAN)\r\n2. Wait for someone to come online, call them, have them accept the call\r\n3. CMD+Q (or similar \"quit\" operation)\r\n\r\n### Observed Behavior\r\n\r\nUse-after-free error.\r\n\r\n### Expected Behavior\r\n\r\nClean exit.\r\n\r\n### Reproducibility\r\n\r\nAlways\r\n\r\n### Operating System\r\n\r\nmacOS\r\n\r\n### Operating System version/distro/name/etc.\r\n\r\nmacOS 15.1\r\n\r\n### Relevant log output\r\n\r\n```strace\r\n[18:08:19.668 UTC] src/core/coreav.cpp:303 : Debug: \"Cancelling call with 8\"\r\n[18:08:19.677 UTC] audio/src/backend/openal.cpp:255 : Debug: Audio source 1 deleted. Sources active: 0\r\n[18:08:19.682 UTC] audio/src/backend/openal.cpp:558 : Debug: Closing audio output\r\n[18:08:19.717 UTC] audio/src/backend/openal.cpp:308 : Debug: Unsubscribed from audio input device [ 0 subscriptions left ]\r\n[18:08:19.717 UTC] audio/src/backend/openal.cpp:532 : Debug: Closing audio input\r\n=================================================================\r\n==40906==ERROR: AddressSanitizer: heap-use-after-free on address 0x6040009eff18 at pc 0x0001048fd999 bp 0x7ff7bb768c00 sp 0x7ff7bb768bf8\r\nREAD of size 8 at 0x6040009eff18 thread T0\r\n[18:08:19.733 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.786 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.841 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.841 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.842 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.842 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.895 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.895 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.895 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n[18:08:19.895 UTC] rtp.c:449 : Warning: ToxAVCall is NULL!\r\n    #0 0x1048fd998 in std::__1::__tree_end_node<std::__1::__tree_node_base<void*>*>* std::__1::__tree_next_iter[abi:nn180100]<std::__1::__tree_end_node<std::__1::__tree_node_base<void*>*>*, std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*) __tree:198\r\n    #1 0x104a68d92 in std::__1::__tree_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>::operator++[abi:nn180100]() __tree:751\r\n    #2 0x104a54416 in std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>>::operator++[abi:nn180100]() map:874\r\n    #3 0x104a534b3 in CoreAV::~CoreAV() coreav.cpp:156\r\n    #4 0x104a55042 in CoreAV::~CoreAV() coreav.cpp:154\r\n    #5 0x104a55096 in CoreAV::~CoreAV() coreav.cpp:154\r\n    #6 0x104e06e66 in std::__1::default_delete<CoreAV>::operator()[abi:nn180100](CoreAV*) const unique_ptr.h:66\r\n    #7 0x104e06d03 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::reset[abi:nn180100](CoreAV*) unique_ptr.h:266\r\n    #8 0x104e06c16 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::~unique_ptr[abi:nn180100]() unique_ptr.h:236\r\n    #9 0x104df5222 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::~unique_ptr[abi:nn180100]() unique_ptr.h:236\r\n    #10 0x104dfa97b in Profile::~Profile() profile.cpp:383\r\n    #11 0x104dfaa52 in Profile::~Profile() profile.cpp:372\r\n    #12 0x104dfaaa6 in Profile::~Profile() profile.cpp:372\r\n    #13 0x10490c5a5 in Nexus::~Nexus() nexus.cpp:66\r\n    #14 0x10490c7a2 in Nexus::~Nexus() nexus.cpp:63\r\n    #15 0x10490c7f6 in Nexus::~Nexus() nexus.cpp:63\r\n    #16 0x1048bd146 in std::__1::default_delete<Nexus>::operator()[abi:nn180100](Nexus*) const unique_ptr.h:66\r\n    #17 0x10489b543 in std::__1::unique_ptr<Nexus, std::__1::default_delete<Nexus>>::reset[abi:nn180100](Nexus*) unique_ptr.h:266\r\n    #18 0x10489afed in AppManager::cleanup() appmanager.cpp:416\r\n    #19 0x1048bce04 in QtPrivate::FunctorCall<QtPrivate::IndexesList<>, QtPrivate::List<>, void, void (AppManager::*)()>::call(void (AppManager::*)(), AppManager*, void**) qobjectdefs_impl.h:145\r\n    #20 0x1048bca8d in void QtPrivate::FunctionPointer<void (AppManager::*)()>::call<QtPrivate::List<>, void>(void (AppManager::*)(), AppManager*, void**) qobjectdefs_impl.h:182\r\n    #21 0x1048bc602 in QtPrivate::QCallableObject<void (AppManager::*)(), QtPrivate::List<>, void>::impl(int, QtPrivate::QSlotObjectBase*, QObject*, void**, bool*) qobjectdefs_impl.h:553\r\n    #22 0x10abd5bbd in void doActivate<false>(QObject*, int, void**)+0x500 (QtCore:x86_64+0xa6bbd)\r\n    #23 0x10ab9c113 in QCoreApplication::exit(int)+0x57 (QtCore:x86_64+0x6d113)\r\n    #24 0x10ab9cefd in QCoreApplication::event(QEvent*)+0x11 (QtCore:x86_64+0x6defd)\r\n    #25 0x10a4bdb1e in QApplication::event(QEvent*)+0x31a (QtWidgets:x86_64+0x9b1e)\r\n    #26 0x10a4beea2 in QApplicationPrivate::notify_helper(QObject*, QEvent*)+0xf0 (QtWidgets:x86_64+0xaea2)\r\n    #27 0x10a4bfc41 in QApplication::notify(QObject*, QEvent*)+0x1f9 (QtWidgets:x86_64+0xbc41)\r\n    #28 0x10ab9bb7f in QCoreApplication::notifyInternal2(QObject*, QEvent*)+0x9f (QtCore:x86_64+0x6cb7f)\r\n    #29 0x10b2415b2 in QGuiApplicationPrivate::processApplicationTermination(QWindowSystemInterfacePrivate::WindowSystemEvent*)+0x30 (QtGui:x86_64+0x655b2)\r\n    #30 0x10b289274 in bool QWindowSystemHelper<QWindowSystemInterface::SynchronousDelivery>::handleEvent<QWindowSystemInterfacePrivate::WindowSystemEvent, QWindowSystemInterfacePrivate::EventType>(QWindowSystemInterfacePrivate::EventType)+0x82 (QtGui:x86_64+0xad274)\r\n    #31 0x114eff4f9 in -[QCocoaApplicationDelegate applicationShouldTerminate:]+0x1b3 (libqcocoa.dylib:x86_64+0x84f9)\r\n    #32 0x7ff80f110245 in -[NSApplication _docController:shouldTerminate:]+0x9c (AppKit:x86_64+0x2ae245)\r\n    #33 0x7ff80f110042 in __91-[NSDocumentController(NSInternal) _closeAllDocumentsWithDelegate:shouldTerminateSelector:]_block_invoke+0x226 (AppKit:x86_64+0x2ae042)\r\n    #34 0x7ff80f10fae9 in -[NSDocumentController(NSInternal) _closeAllDocumentsWithDelegate:shouldTerminateSelector:]+0x5bc (AppKit:x86_64+0x2adae9)\r\n    #35 0x7ff80f10f4c7 in -[NSDocumentController(NSInternal) __closeAllDocumentsWithDelegate:shouldTerminateSelector:]+0x164 (AppKit:x86_64+0x2ad4c7)\r\n    #36 0x7ff80f10ef74 in -[NSApplication _shouldTerminate]+0x624 (AppKit:x86_64+0x2acf74)\r\n    #37 0x7ff80f0ffb89 in -[NSApplication terminate:]+0x404 (AppKit:x86_64+0x29db89)\r\n    #38 0x7ff80f086b6e in -[NSApplication(NSResponder) sendAction:to:from:]+0x14e (AppKit:x86_64+0x224b6e)\r\n    #39 0x7ff80f171ed1 in -[NSMenuItem _corePerformAction]+0x1c6 (AppKit:x86_64+0x30fed1)\r\n    #40 0x7ff80f906ed1 in _NSMenuPerformActionWithHighlighting+0xb8 (AppKit:x86_64+0xaa4ed1)\r\n    #41 0x7ff80f72160f in -[NSMenu _performKeyEquivalentForItemAtIndex:]+0x59 (AppKit:x86_64+0x8bf60f)\r\n    #42 0x7ff80f170bc9 in -[NSMenu performKeyEquivalent:]+0x1a2 (AppKit:x86_64+0x30ebc9)\r\n    #43 0x7ff80f8d75ce in routeKeyEquivalent+0x2ac (AppKit:x86_64+0xa755ce)\r\n    #44 0x7ff80f8d473b in -[NSApplication(NSEventRouting) sendEvent:]+0x33b (AppKit:x86_64+0xa7273b)\r\n    #45 0x114eff009 in -[QNSApplication sendEvent:]+0x3d (libqcocoa.dylib:x86_64+0x8009)\r\n    #46 0x7ff80f448802 in -[NSApplication _handleEvent:]+0x40 (AppKit:x86_64+0x5e6802)\r\n    #47 0x7ff80ee92c84 in -[NSApplication run]+0x28d (AppKit:x86_64+0x30c84)\r\n    #48 0x114f0b0ec in QCocoaEventDispatcher::processEvents(QFlags<QEventLoop::ProcessEventsFlag>)+0x93e (libqcocoa.dylib:x86_64+0x140ec)\r\n    #49 0x10aba2123 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>)+0x16f (QtCore:x86_64+0x73123)\r\n    #50 0x10ab9bfdb in QCoreApplication::exec()+0x77 (QtCore:x86_64+0x6cfdb)\r\n    #51 0x104896db1 in AppManager::run() appmanager.cpp:399\r\n    #52 0x10479d9e9 in main main.cpp:14\r\n    #53 0x7ff80b1162cc in start+0x70c (dyld:x86_64+0xfffffffffff4f2cc)\r\n\r\n0x6040009eff18 is located 8 bytes inside of 48-byte region [0x6040009eff10,0x6040009eff40)\r\nfreed by thread T0 here:\r\n    #0 0x10b97fe9d in _ZdlPv+0x7d (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0xede9d)\r\n    #1 0x104840b42 in void std::__1::__libcpp_operator_delete[abi:nn180100]<void*>(void*) new:312\r\n    #2 0x104840aa6 in void std::__1::__do_deallocate_handle_size[abi:nn180100]<>(void*, unsigned long) new:334\r\n    #3 0x1048409f2 in std::__1::__libcpp_deallocate[abi:nn180100](void*, unsigned long, unsigned long) new:349\r\n    #4 0x104a64c64 in std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>::deallocate[abi:nn180100](std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, unsigned long) allocator.h:139\r\n    #5 0x104a64982 in std::__1::allocator_traits<std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>>::deallocate[abi:nn180100](std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>&, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, unsigned long) allocator_traits.h:289\r\n    #6 0x104a6cea2 in std::__1::__tree<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__map_value_compare<unsigned int, std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::less<unsigned int>, true>, std::__1::allocator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::erase(std::__1::__tree_const_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>) __tree:2051\r\n    #7 0x104a70af4 in unsigned long std::__1::__tree<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__map_value_compare<unsigned int, std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::less<unsigned int>, true>, std::__1::allocator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::__erase_unique<unsigned int>(unsigned int const&) __tree:2070\r\n    #8 0x104a59c0a in std::__1::map<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>, std::__1::less<unsigned int>, std::__1::allocator<std::__1::pair<unsigned int const, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::erase[abi:nn180100](unsigned int const&) map:1314\r\n    #9 0x104a54292 in CoreAV::cancelCall(unsigned int) coreav.cpp:310\r\n    #10 0x104a534aa in CoreAV::~CoreAV() coreav.cpp:157\r\n    #11 0x104a55042 in CoreAV::~CoreAV() coreav.cpp:154\r\n    #12 0x104a55096 in CoreAV::~CoreAV() coreav.cpp:154\r\n    #13 0x104e06e66 in std::__1::default_delete<CoreAV>::operator()[abi:nn180100](CoreAV*) const unique_ptr.h:66\r\n    #14 0x104e06d03 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::reset[abi:nn180100](CoreAV*) unique_ptr.h:266\r\n    #15 0x104e06c16 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::~unique_ptr[abi:nn180100]() unique_ptr.h:236\r\n    #16 0x104df5222 in std::__1::unique_ptr<CoreAV, std::__1::default_delete<CoreAV>>::~unique_ptr[abi:nn180100]() unique_ptr.h:236\r\n    #17 0x104dfa97b in Profile::~Profile() profile.cpp:383\r\n    #18 0x104dfaa52 in Profile::~Profile() profile.cpp:372\r\n    #19 0x104dfaaa6 in Profile::~Profile() profile.cpp:372\r\n    #20 0x10490c5a5 in Nexus::~Nexus() nexus.cpp:66\r\n    #21 0x10490c7a2 in Nexus::~Nexus() nexus.cpp:63\r\n    #22 0x10490c7f6 in Nexus::~Nexus() nexus.cpp:63\r\n    #23 0x1048bd146 in std::__1::default_delete<Nexus>::operator()[abi:nn180100](Nexus*) const unique_ptr.h:66\r\n    #24 0x10489b543 in std::__1::unique_ptr<Nexus, std::__1::default_delete<Nexus>>::reset[abi:nn180100](Nexus*) unique_ptr.h:266\r\n    #25 0x10489afed in AppManager::cleanup() appmanager.cpp:416\r\n    #26 0x1048bce04 in QtPrivate::FunctorCall<QtPrivate::IndexesList<>, QtPrivate::List<>, void, void (AppManager::*)()>::call(void (AppManager::*)(), AppManager*, void**) qobjectdefs_impl.h:145\r\n    #27 0x1048bca8d in void QtPrivate::FunctionPointer<void (AppManager::*)()>::call<QtPrivate::List<>, void>(void (AppManager::*)(), AppManager*, void**) qobjectdefs_impl.h:182\r\n    #28 0x1048bc602 in QtPrivate::QCallableObject<void (AppManager::*)(), QtPrivate::List<>, void>::impl(int, QtPrivate::QSlotObjectBase*, QObject*, void**, bool*) qobjectdefs_impl.h:553\r\n    #29 0x10abd5bbd in void doActivate<false>(QObject*, int, void**)+0x500 (QtCore:x86_64+0xa6bbd)\r\n\r\npreviously allocated by thread T0 here:\r\n    #0 0x10b97fa7d in _Znwm+0x7d (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0xeda7d)\r\n    #1 0x10483cf22 in void* std::__1::__libcpp_operator_new[abi:nn180100]<unsigned long>(unsigned long) new:303\r\n    #2 0x10483ce1a in std::__1::__libcpp_allocate[abi:nn180100](unsigned long, unsigned long) new:327\r\n    #3 0x104a6f487 in std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>::allocate[abi:nn180100](unsigned long) allocator.h:125\r\n    #4 0x104a6f20a in std::__1::allocator_traits<std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>>::allocate[abi:nn180100](std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>&, unsigned long) allocator_traits.h:269\r\n    #5 0x104a6eade in std::__1::unique_ptr<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>, std::__1::__tree_node_destructor<std::__1::allocator<std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>>>> std::__1::__tree<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__map_value_compare<unsigned int, std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::less<unsigned int>, true>, std::__1::allocator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::__construct_node<unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>(unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>&&) __tree:1819\r\n    #6 0x104a6e3d2 in std::__1::pair<std::__1::__tree_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>, bool> std::__1::__tree<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__map_value_compare<unsigned int, std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::less<unsigned int>, true>, std::__1::allocator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::__emplace_unique_key_args<unsigned int, unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>(unsigned int const&, unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>&&) __tree:1786\r\n    #7 0x104a6dfc6 in std::__1::pair<std::__1::__tree_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>, bool> std::__1::__tree<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__map_value_compare<unsigned int, std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::less<unsigned int>, true>, std::__1::allocator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::__emplace_unique[abi:nn180100]<unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>, 0>(unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>&&) __tree:1046\r\n    #8 0x104a597ff in std::__1::pair<std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, std::__1::__tree_node<std::__1::__value_type<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>, void*>*, long>>, bool> std::__1::map<unsigned int, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>, std::__1::less<unsigned int>, std::__1::allocator<std::__1::pair<unsigned int const, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>>>::emplace[abi:nn180100]<unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>>(unsigned int&, std::__1::unique_ptr<ToxFriendCall, std::__1::default_delete<ToxFriendCall>>&&) map:1171\r\n    #9 0x104a5927a in CoreAV::startCall(unsigned int, bool) coreav.cpp:294\r\n    #10 0x10504e520 in ChatForm::onCallTriggered() chatform.cpp:403\r\n    #11 0x10505c6c4 in QtPrivate::FunctorCall<QtPrivate::IndexesList<>, QtPrivate::List<>, void, void (ChatForm::*)()>::call(void (ChatForm::*)(), ChatForm*, void**) qobjectdefs_impl.h:145\r\n    #12 0x10505c34d in void QtPrivate::FunctionPointer<void (ChatForm::*)()>::call<QtPrivate::List<>, void>(void (ChatForm::*)(), ChatForm*, void**) qobjectdefs_impl.h:182\r\n    #13 0x10505bec2 in QtPrivate::QCallableObject<void (ChatForm::*)(), QtPrivate::List<>, void>::impl(int, QtPrivate::QSlotObjectBase*, QObject*, void**, bool*) qobjectdefs_impl.h:553\r\n    #14 0x10abd5bbd in void doActivate<false>(QObject*, int, void**)+0x500 (QtCore:x86_64+0xa6bbd)\r\n    #15 0x1047ef98f in ChatFormHeader::callTriggered() moc_chatformheader.cpp:240\r\n    #16 0x104faf8d4 in QtPrivate::FunctorCall<QtPrivate::IndexesList<>, QtPrivate::List<>, void, void (ChatFormHeader::*)()>::call(void (ChatFormHeader::*)(), ChatFormHeader*, void**) qobjectdefs_impl.h:145\r\n    #17 0x104faf55d in void QtPrivate::FunctionPointer<void (ChatFormHeader::*)()>::call<QtPrivate::List<>, void>(void (ChatFormHeader::*)(), ChatFormHeader*, void**) qobjectdefs_impl.h:182\r\n    #18 0x104faf0d2 in QtPrivate::QCallableObject<void (ChatFormHeader::*)(), QtPrivate::List<>, void>::impl(int, QtPrivate::QSlotObjectBase*, QObject*, void**, bool*) qobjectdefs_impl.h:553\r\n    #19 0x10abd5bbd in void doActivate<false>(QObject*, int, void**)+0x500 (QtCore:x86_64+0xa6bbd)\r\n    #20 0x10a5a4c20 in QAbstractButtonPrivate::emitClicked()+0x6c (QtWidgets:x86_64+0xf0c20)\r\n    #21 0x10a5a4acc in QAbstractButtonPrivate::click()+0xf6 (QtWidgets:x86_64+0xf0acc)\r\n    #22 0x10a5a5700 in QAbstractButton::mouseReleaseEvent(QMouseEvent*)+0xbe (QtWidgets:x86_64+0xf1700)\r\n    #23 0x10a4fdadc in QWidget::event(QEvent*)+0x58e (QtWidgets:x86_64+0x49adc)\r\n    #24 0x10a4beea2 in QApplicationPrivate::notify_helper(QObject*, QEvent*)+0xf0 (QtWidgets:x86_64+0xaea2)\r\n    #25 0x10a4c11d5 in QApplication::notify(QObject*, QEvent*)+0x178d (QtWidgets:x86_64+0xd1d5)\r\n    #26 0x10ab9bb7f in QCoreApplication::notifyInternal2(QObject*, QEvent*)+0x9f (QtCore:x86_64+0x6cb7f)\r\n    #27 0x10a4bf3e3 in QApplicationPrivate::sendMouseEvent(QWidget*, QMouseEvent*, QWidget*, QWidget*, QWidget**, QPointer<QWidget>&, bool, bool)+0x36b (QtWidgets:x86_64+0xb3e3)\r\n    #28 0x10a510a50 in QWidgetWindow::handleMouseEvent(QMouseEvent*)+0x68c (QtWidgets:x86_64+0x5ca50)\r\n    #29 0x10a50fb2a in QWidgetWindow::event(QEvent*)+0x6a (QtWidgets:x86_64+0x5bb2a)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free __tree:198 in std::__1::__tree_end_node<std::__1::__tree_node_base<void*>*>* std::__1::__tree_next_iter[abi:nn180100]<std::__1::__tree_end_node<std::__1::__tree_node_base<void*>*>*, std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*)\r\nShadow bytes around the buggy address:\r\n  0x6040009efc80: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fa\r\n  0x6040009efd00: fa fa fd fd fd fd fd fd fa fa fd fd fd fd fd fd\r\n  0x6040009efd80: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fa\r\n  0x6040009efe00: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fd\r\n  0x6040009efe80: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fd\r\n=>0x6040009eff00: fa fa fd[fd]fd fd fd fd fa fa fd fd fd fd fd fa\r\n  0x6040009eff80: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fa\r\n  0x6040009f0000: fa fa fd fd fd fd fd fd fa fa fd fd fd fd fd fd\r\n  0x6040009f0080: fa fa fd fd fd fd fd fd fa fa fd fd fd fd fd fd\r\n  0x6040009f0100: fa fa fd fd fd fd fd fa fa fa fd fd fd fd fd fd\r\n  0x6040009f0180: fa fa fd fd fd fd fd fd fa fa fd fd fd fd fd fa\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07\r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n==40906==ABORTING\r\n```\r\n",
    "closed_at": "2024-12-04T11:28:13Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41485111?v=4",
        "events_url": "https://api.github.com/users/toktok-releaser/events{/privacy}",
        "followers_url": "https://api.github.com/users/toktok-releaser/followers",
        "following_url": "https://api.github.com/users/toktok-releaser/following{/other_user}",
        "gists_url": "https://api.github.com/users/toktok-releaser/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/toktok-releaser",
        "id": 41485111,
        "login": "toktok-releaser",
        "node_id": "MDQ6VXNlcjQxNDg1MTEx",
        "organizations_url": "https://api.github.com/users/toktok-releaser/orgs",
        "received_events_url": "https://api.github.com/users/toktok-releaser/received_events",
        "repos_url": "https://api.github.com/users/toktok-releaser/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/toktok-releaser/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/toktok-releaser/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/toktok-releaser",
        "user_view_type": "public"
    },
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/TokTok/qTox/issues/180/comments",
    "created_at": "2024-12-01T18:50:46Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-12-01T18:50:46Z",
            "event": "labeled",
            "id": 15485057612,
            "label": {
                "color": "ee0701",
                "name": "bug"
            },
            "node_id": "LE_lADOA9gydM6hglnSzwAAAAOa-zpM",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15485057612"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-12-01T18:51:56Z",
            "event": "milestoned",
            "id": 15485059882,
            "milestone": {
                "title": "v1.18.0"
            },
            "node_id": "MIE_lADOA9gydM6hglnSzwAAAAOa-0Mq",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15485059882"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41485111?v=4",
                "events_url": "https://api.github.com/users/toktok-releaser/events{/privacy}",
                "followers_url": "https://api.github.com/users/toktok-releaser/followers",
                "following_url": "https://api.github.com/users/toktok-releaser/following{/other_user}",
                "gists_url": "https://api.github.com/users/toktok-releaser/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/toktok-releaser",
                "id": 41485111,
                "login": "toktok-releaser",
                "node_id": "MDQ6VXNlcjQxNDg1MTEx",
                "organizations_url": "https://api.github.com/users/toktok-releaser/orgs",
                "received_events_url": "https://api.github.com/users/toktok-releaser/received_events",
                "repos_url": "https://api.github.com/users/toktok-releaser/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/toktok-releaser/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/toktok-releaser/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/toktok-releaser",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-12-04T11:28:14Z",
            "event": "closed",
            "id": 15524191130,
            "node_id": "CE_lADOA9gydM6hglnSzwAAAAOdUFua",
            "performed_via_github_app": null,
            "state_reason": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15524191130"
        }
    ],
    "events_url": "https://api.github.com/repos/TokTok/qTox/issues/180/events",
    "html_url": "https://github.com/TokTok/qTox/issues/180",
    "id": 2709674450,
    "labels": [
        {
            "color": "ee0701",
            "default": true,
            "description": "Bug fix for the user, not a fix to a build script",
            "id": 416369848,
            "name": "bug",
            "node_id": "MDU6TGFiZWw0MTYzNjk4NDg=",
            "url": "https://api.github.com/repos/TokTok/qTox/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/TokTok/qTox/issues/180/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2025-01-01T18:54:11Z",
        "closed_issues": 267,
        "created_at": "2020-05-04T00:19:45Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/TokTok/qTox/milestone/1",
        "id": 5377672,
        "labels_url": "https://api.github.com/repos/TokTok/qTox/milestones/1/labels",
        "node_id": "MDk6TWlsZXN0b25lNTM3NzY3Mg==",
        "number": 1,
        "open_issues": 0,
        "state": "closed",
        "title": "v1.18.0",
        "updated_at": "2025-01-16T08:13:58Z",
        "url": "https://api.github.com/repos/TokTok/qTox/milestones/1"
    },
    "node_id": "I_kwDOA9gydM6hglnS",
    "number": 180,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/TokTok/qTox/issues/180/reactions"
    },
    "repository_url": "https://api.github.com/repos/TokTok/qTox",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/TokTok/qTox/issues/180/timeline",
    "title": "Bug: Use-after-free when closing qTox during an audio call",
    "updated_at": "2024-12-04T11:28:14Z",
    "url": "https://api.github.com/repos/TokTok/qTox/issues/180",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
        "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
        "followers_url": "https://api.github.com/users/iphydf/followers",
        "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
        "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/iphydf",
        "id": 10647936,
        "login": "iphydf",
        "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
        "organizations_url": "https://api.github.com/users/iphydf/orgs",
        "received_events_url": "https://api.github.com/users/iphydf/received_events",
        "repos_url": "https://api.github.com/users/iphydf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/iphydf",
        "user_view_type": "public"
    }
}