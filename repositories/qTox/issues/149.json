{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "##### Brief Description\r\n\r\nOS: Gentoo Linux\r\nqTox version: `git master`\r\nCommit hash:  bb1324e7fbadcbdc1359c5f19959fccf8da7a5dd\r\ntoxcore:  0.2.20\r\nQt: 6.8.0\r\n\r\nReproducible: Always\r\n\r\n##### Steps to reproduce\r\n\r\n1. Build with, and enable the spellcheck feature.\r\n2. Run qTox.\r\n3. Terminate qTox.\r\n\r\n##### Observed Behavior\r\n\r\nCrashy-crashy on a segmentation fault.\r\n\r\n```\r\nThread 1 \"qtox\" received signal SIGSEGV, Segmentation fault.\r\n0x00007ffff3cf2a09 in QWeakPointer<QObject>::QWeakPointer (this=0x0, other=...)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qsharedpointer_impl.h:581\r\n581         QWeakPointer(const QWeakPointer &other) noexcept : d(other.d), value(other.value)\r\n(gdb) bt\r\n#0  0x00007ffff3cf2a09 in QWeakPointer<QObject>::QWeakPointer (this=0x0, other=...)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qsharedpointer_impl.h:581\r\n#1  QPointer<QObject>::QPointer (this=0x0) at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qpointer.h:18\r\n#2  QtPrivate::QGenericArrayOps<QPointer<QObject> >::copyAppend (this=<synthetic pointer>, b=0x555558fb4430, e=0x555558fb4460)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qarraydataops.h:321\r\n#3  QArrayDataPointer<QPointer<QObject> >::reallocateAndGrow (this=0x555558fa1748, where=QArrayData::GrowsAtEnd, n=0, old=0x0)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qarraydatapointer.h:241\r\n#4  0x00007ffff3cab522 in QArrayDataPointer<QPointer<QObject> >::detach (this=0x555558fa1748, old=0x0)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qarraydatapointer.h:145\r\n#5  QArrayDataPointer<QPointer<QObject> >::detach (this=0x555558fa1748, old=0x0)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qarraydatapointer.h:142\r\n#6  QList<QPointer<QObject> >::detach (this=0x555558fa1748) at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qlist.h:428\r\n#7  QList<QPointer<QObject> >::begin (this=0x555558fa1748) at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/tools/qlist.h:627\r\n#8  QObject::removeEventFilter (this=<optimized out>, obj=0x555558f3b590) at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qobject.cpp:2373\r\n#9  0x00007ffff68d182e in Sonnet::SpellCheckDecoratorPrivate::~SpellCheckDecoratorPrivate (this=0x555558fb35e0, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/kde-frameworks/sonnet-6.8.0/sonnet-6.8.0/src/ui/spellcheckdecorator.cpp:54\r\n#10 std::default_delete<Sonnet::SpellCheckDecoratorPrivate>::operator() (this=<optimized out>, __ptr=0x555558fb35e0)\r\n    at /usr/lib/gcc/x86_64-pc-linux-gnu/14/include/g++-v14/bits/unique_ptr.h:93\r\n#11 std::default_delete<Sonnet::SpellCheckDecoratorPrivate>::operator() (this=<optimized out>, __ptr=0x555558fb35e0)\r\n    at /usr/lib/gcc/x86_64-pc-linux-gnu/14/include/g++-v14/bits/unique_ptr.h:87\r\n#12 std::unique_ptr<Sonnet::SpellCheckDecoratorPrivate, std::default_delete<Sonnet::SpellCheckDecoratorPrivate> >::~unique_ptr (this=0x555558f3b5a0, __in_chrg=<optimized out>)\r\n    at /usr/lib/gcc/x86_64-pc-linux-gnu/14/include/g++-v14/bits/unique_ptr.h:399\r\n#13 Sonnet::SpellCheckDecorator::~SpellCheckDecorator (this=0x555558f3b590, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/kde-frameworks/sonnet-6.8.0/sonnet-6.8.0/src/ui/spellcheckdecorator.cpp:234\r\n#14 0x00007ffff68d1859 in Sonnet::SpellCheckDecorator::~SpellCheckDecorator (this=0x555558f3b590, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/kde-frameworks/sonnet-6.8.0/sonnet-6.8.0/src/ui/spellcheckdecorator.cpp:234\r\n#15 0x00007ffff3cab253 in QObjectPrivate::deleteChildren (this=this@entry=0x5555586efb80)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qobject.cpp:2211\r\n#16 0x00007ffff4f2d9f8 in QWidget::~QWidget (this=0x555558fa12f0, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/kernel/qwidget.cpp:1559\r\n#17 0x00005555557808bb in ChatTextEdit::~ChatTextEdit (this=0x555558fa12f0, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/widget/tool/chattextedit.cpp:28\r\n#18 0x00007ffff3cab253 in QObjectPrivate::deleteChildren (this=this@entry=0x55555900b300)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qobject.cpp:2211\r\n#19 0x00007ffff4f2d9f8 in QWidget::~QWidget (this=0x555558f15250, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/kernel/qwidget.cpp:1559\r\n#20 0x00007ffff4f2db49 in QWidget::~QWidget (this=0x555558f15250, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/kernel/qwidget.cpp:1585\r\n#21 0x00007ffff3cab253 in QObjectPrivate::deleteChildren (this=this@entry=0x555558e0e590)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qobject.cpp:2211\r\n#22 0x00007ffff4f2d9f8 in QWidget::~QWidget (this=0x5555590072e0, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/kernel/qwidget.cpp:1559\r\n#23 0x00007ffff4d90229 in QSplitter::~QSplitter (this=0x5555590072e0, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/widgets/qsplitter.cpp:951\r\n#24 0x00007ffff3cab253 in QObjectPrivate::deleteChildren (this=this@entry=0x555558e4add0)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/corelib/kernel/qobject.cpp:2211\r\n#25 0x00007ffff4f2d9f8 in QWidget::~QWidget (this=0x555556143c00, __in_chrg=<optimized out>)\r\n    at /usr/src/debug/dev-qt/qtbase-6.8.0-r1/qtbase-everywhere-src-6.8.0/src/widgets/kernel/qwidget.cpp:1559\r\n#26 0x00005555557296db in ChatForm::~ChatForm (this=0x555556143c00, __in_chrg=<optimized out>) at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/widget/form/chatform.cpp:212\r\n#27 0x000055555563ecdc in Widget::removeFriend (this=this@entry=0x5555565abc40, f=<optimized out>, fake=fake@entry=true)\r\n    at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/widget/widget.cpp:1773\r\n#28 0x0000555555640694 in Widget::~Widget (this=0x5555565abc40, __in_chrg=<optimized out>) at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/widget/widget.cpp:638\r\n#29 0x00005555556411ab in Widget::~Widget (this=0x5555565abc40, __in_chrg=<optimized out>) at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/widget/widget.cpp:660\r\n#30 0x00005555555c1262 in Nexus::~Nexus (this=0x5555563a7660, __in_chrg=<optimized out>) at /usr/src/debug/net-im/qtox-9999/qtox-9999/src/nexus.cpp:64\r\n```\r\n\r\n##### Expected Behavior\r\n\r\nNo crashy-crashy.\r\n\r\n##### Additional Info\r\n\r\nThere is a patch in a Gentoo bug report [1], but I'm not sure it is entirely sufficient/the way to go with.\r\n\r\n1. https://bugs.gentoo.org/895634\r\n",
    "closed_at": "2024-11-26T14:20:04Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41485111?v=4",
        "events_url": "https://api.github.com/users/toktok-releaser/events{/privacy}",
        "followers_url": "https://api.github.com/users/toktok-releaser/followers",
        "following_url": "https://api.github.com/users/toktok-releaser/following{/other_user}",
        "gists_url": "https://api.github.com/users/toktok-releaser/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/toktok-releaser",
        "id": 41485111,
        "login": "toktok-releaser",
        "node_id": "MDQ6VXNlcjQxNDg1MTEx",
        "organizations_url": "https://api.github.com/users/toktok-releaser/orgs",
        "received_events_url": "https://api.github.com/users/toktok-releaser/received_events",
        "repos_url": "https://api.github.com/users/toktok-releaser/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/toktok-releaser/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/toktok-releaser/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/toktok-releaser",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> `0x00007ffff3cf2a09 in QWeakPointer<QObject>::QWeakPointer (this=0x0, other=...)`\r\n\r\nNull pointer gets created, presumably from\r\n\r\n> `#5  QArrayDataPointer<QPointer<QObject> >::detach (this=0x555558fa1748, old=0x0)`\r\n\r\nThe patch looks promising. I'll see if I can get a KF6 Sonnet build working locally to see if I can reproduce as well.",
            "created_at": "2024-11-24T13:44:46Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496011354",
            "id": 2496011354,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6Uxhxa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496011354/reactions"
            },
            "updated_at": "2024-11-24T13:44:46Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496011354",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I can't reproduce with sonnet 6.8.0 on macOS.",
            "created_at": "2024-11-24T14:03:44Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496020581",
            "id": 2496020581,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6UxkBl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496020581/reactions"
            },
            "updated_at": "2024-11-24T14:03:44Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496020581",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Hmmm sonnet 6.8.0 here as well.\r\n\r\nI did forget a step, in particular requiring a restart after enabling spellcheck.\r\n\r\nAlso with a fresh new profile, it didn't seem to happen until I opened a chat window for someone (I did not type in anything).\r\n\r\nStarting with a new profile:\r\n\r\n1. Enable spellcheck.\r\n2. Restart qTox.\r\n3. Open a chat.\r\n4. Terminate qTox.\r\n\r\nThat should be all.\r\n\r\nInterestingly, after having opened a chat window for the first time, I don't need to do that again.\r\n\r\nOh and I'm using the multiple chat windows mode, though from a quick test that doesn't seem to make a difference.\r\n",
            "created_at": "2024-11-24T15:08:07Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496049947",
            "id": 2496049947,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6UxrMb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496049947/reactions"
            },
            "updated_at": "2024-11-24T15:08:07Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496049947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9367616?v=4",
                "events_url": "https://api.github.com/users/Chiitoo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Chiitoo/followers",
                "following_url": "https://api.github.com/users/Chiitoo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Chiitoo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Chiitoo",
                "id": 9367616,
                "login": "Chiitoo",
                "node_id": "MDQ6VXNlcjkzNjc2MTY=",
                "organizations_url": "https://api.github.com/users/Chiitoo/orgs",
                "received_events_url": "https://api.github.com/users/Chiitoo/received_events",
                "repos_url": "https://api.github.com/users/Chiitoo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Chiitoo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Chiitoo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Chiitoo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I still can't reproduce, but I'll try a few more things. Just now I got a\r\n\r\n```\r\n[15:50:27.946 UTC] src/core/corefile.cpp:328 : Debug: \"Received empty avatar request 7:65536\"\r\n[15:50:27.996 UTC] /usr/local/include/QtCore/qhash.h:787 : Fatal: ASSERT: \"!isUnused()\" in file /usr/local/include/QtCore/qhash.h, line 787\r\n```\r\n\r\nI'm not sure it's related to spell checking or multi-window mode.",
            "created_at": "2024-11-24T15:51:24Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496080643",
            "id": 2496080643,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6UxysD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496080643/reactions"
            },
            "updated_at": "2024-11-24T15:51:24Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496080643",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I still can't reproduce. Tomorrow I'll test on Linux, maybe I'll be able to then.\r\n\r\nDid you test the patch from gentoo?",
            "created_at": "2024-11-25T01:01:47Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496473840",
            "id": 2496473840,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6UzSrw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496473840/reactions"
            },
            "updated_at": "2024-11-25T01:01:47Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496473840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That patch is kind of weird, as it looks like it shouldn't be needed - the patch should result in a double-delete. The `SpellCheckDecorator()` constructor doc string says that it sets the decorator as a child of `QTextEdit`, so the decorator will get deleted in `QTextEdit`'s destructor.\r\n\r\n>[@param textEdit the QTextEdit in need of spell-checking. It also is used as the QObject parent for the decorator.](https://github.com/KDE/sonnet/blob/v6.8.0/src/ui/spellcheckdecorator.h#L38-L43)\r\n\r\n---\r\n\r\nAlso, looking at the code surrounding that patch, why does qTox do\r\nhttps://github.com/TokTok/qTox/blob/6cbacf359eed7b29d2e3e076ee87a9370c0cfcde/src/widget/form/genericchatform.cpp#L295 ?\r\n\r\n`searchForm` is added to a layout via\r\nhttps://github.com/TokTok/qTox/blob/6cbacf359eed7b29d2e3e076ee87a9370c0cfcde/src/widget/form/genericchatform.cpp#L205\r\nso the layout takes the ownership of `searchForm` and will delete it in its own destructor, yet we also manually delete it in genericchatform.cpp:295. This look like a double-delete and makes no sense to me.",
            "created_at": "2024-11-25T04:26:38Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2496746071",
            "id": 2496746071,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6U0VJX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496746071/reactions"
            },
            "updated_at": "2024-11-26T00:36:48Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2496746071",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1855294?v=4",
                "events_url": "https://api.github.com/users/nurupo/events{/privacy}",
                "followers_url": "https://api.github.com/users/nurupo/followers",
                "following_url": "https://api.github.com/users/nurupo/following{/other_user}",
                "gists_url": "https://api.github.com/users/nurupo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nurupo",
                "id": 1855294,
                "login": "nurupo",
                "node_id": "MDQ6VXNlcjE4NTUyOTQ=",
                "organizations_url": "https://api.github.com/users/nurupo/orgs",
                "received_events_url": "https://api.github.com/users/nurupo/received_events",
                "repos_url": "https://api.github.com/users/nurupo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nurupo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nurupo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nurupo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yeah, I agree that's suspicious code. I don't know why it doesn't crash, even under asan.",
            "created_at": "2024-11-25T22:40:25Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2499181747",
            "id": 2499181747,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6U9nyz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2499181747/reactions"
            },
            "updated_at": "2024-11-25T22:40:25Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2499181747",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "As discussed in chat, delete is ok-ish on `QObject`s, but only if you know for sure it's not going to be touched again. `ob->deleteLater()` is usually safer, but in this case it won't do anything useful.\r\n\r\nDoes the explicit delete of the decorator make the segfault go away?",
            "created_at": "2024-11-26T01:20:52Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2499376039",
            "id": 2499376039,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6U-XOn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2499376039/reactions"
            },
            "updated_at": "2024-11-26T01:20:52Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2499376039",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Apologies for the delay; yes, the patch seems to at least work around the segfault here.\r\n",
            "created_at": "2024-11-26T12:08:43Z",
            "html_url": "https://github.com/TokTok/qTox/issues/149#issuecomment-2500572044",
            "id": 2500572044,
            "issue_url": "https://api.github.com/repos/TokTok/qTox/issues/149",
            "node_id": "IC_kwDOA9gydM6VC7OM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2500572044/reactions"
            },
            "updated_at": "2024-11-26T12:08:43Z",
            "url": "https://api.github.com/repos/TokTok/qTox/issues/comments/2500572044",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9367616?v=4",
                "events_url": "https://api.github.com/users/Chiitoo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Chiitoo/followers",
                "following_url": "https://api.github.com/users/Chiitoo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Chiitoo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Chiitoo",
                "id": 9367616,
                "login": "Chiitoo",
                "node_id": "MDQ6VXNlcjkzNjc2MTY=",
                "organizations_url": "https://api.github.com/users/Chiitoo/orgs",
                "received_events_url": "https://api.github.com/users/Chiitoo/received_events",
                "repos_url": "https://api.github.com/users/Chiitoo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Chiitoo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Chiitoo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Chiitoo",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 9,
    "comments_url": "https://api.github.com/repos/TokTok/qTox/issues/149/comments",
    "created_at": "2024-11-24T13:22:04Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-11-24T13:41:50Z",
            "event": "milestoned",
            "id": 15410631698,
            "milestone": {
                "title": "v1.18.0"
            },
            "node_id": "MIE_lADOA9gydM6gM6-WzwAAAAOWi5QS",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15410631698"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-11-24T13:42:02Z",
            "event": "labeled",
            "id": 15410632181,
            "label": {
                "color": "ee0701",
                "name": "bug"
            },
            "node_id": "LE_lADOA9gydM6gM6-WzwAAAAOWi5X1",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15410632181"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-11-24T13:42:02Z",
            "event": "labeled",
            "id": 15410632182,
            "label": {
                "color": "d93f0b",
                "name": "P0"
            },
            "node_id": "LE_lADOA9gydM6gM6-WzwAAAAOWi5X2",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15410632182"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41485111?v=4",
                "events_url": "https://api.github.com/users/toktok-releaser/events{/privacy}",
                "followers_url": "https://api.github.com/users/toktok-releaser/followers",
                "following_url": "https://api.github.com/users/toktok-releaser/following{/other_user}",
                "gists_url": "https://api.github.com/users/toktok-releaser/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/toktok-releaser",
                "id": 41485111,
                "login": "toktok-releaser",
                "node_id": "MDQ6VXNlcjQxNDg1MTEx",
                "organizations_url": "https://api.github.com/users/toktok-releaser/orgs",
                "received_events_url": "https://api.github.com/users/toktok-releaser/received_events",
                "repos_url": "https://api.github.com/users/toktok-releaser/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/toktok-releaser/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/toktok-releaser/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/toktok-releaser",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-11-26T14:20:05Z",
            "event": "closed",
            "id": 15437102217,
            "node_id": "CE_lADOA9gydM6gM6-WzwAAAAOYH3yJ",
            "performed_via_github_app": null,
            "state_reason": null,
            "url": "https://api.github.com/repos/TokTok/qTox/issues/events/15437102217"
        }
    ],
    "events_url": "https://api.github.com/repos/TokTok/qTox/issues/149/events",
    "html_url": "https://github.com/TokTok/qTox/issues/149",
    "id": 2687741846,
    "labels": [
        {
            "color": "ee0701",
            "default": true,
            "description": "Bug fix for the user, not a fix to a build script",
            "id": 416369848,
            "name": "bug",
            "node_id": "MDU6TGFiZWw0MTYzNjk4NDg=",
            "url": "https://api.github.com/repos/TokTok/qTox/labels/bug"
        },
        {
            "color": "d93f0b",
            "default": false,
            "description": "Critical priority",
            "id": 2013011814,
            "name": "P0",
            "node_id": "MDU6TGFiZWwyMDEzMDExODE0",
            "url": "https://api.github.com/repos/TokTok/qTox/labels/P0"
        }
    ],
    "labels_url": "https://api.github.com/repos/TokTok/qTox/issues/149/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2025-01-01T18:54:11Z",
        "closed_issues": 267,
        "created_at": "2020-05-04T00:19:45Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/TokTok/qTox/milestone/1",
        "id": 5377672,
        "labels_url": "https://api.github.com/repos/TokTok/qTox/milestones/1/labels",
        "node_id": "MDk6TWlsZXN0b25lNTM3NzY3Mg==",
        "number": 1,
        "open_issues": 0,
        "state": "closed",
        "title": "v1.18.0",
        "updated_at": "2025-01-16T08:13:58Z",
        "url": "https://api.github.com/repos/TokTok/qTox/milestones/1"
    },
    "node_id": "I_kwDOA9gydM6gM6-W",
    "number": 149,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/TokTok/qTox/issues/149/reactions"
    },
    "repository_url": "https://api.github.com/repos/TokTok/qTox",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/TokTok/qTox/issues/149/timeline",
    "title": "Segmentation fault on exit when spellcheck is enabled.",
    "updated_at": "2024-11-26T14:20:05Z",
    "url": "https://api.github.com/repos/TokTok/qTox/issues/149",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9367616?v=4",
        "events_url": "https://api.github.com/users/Chiitoo/events{/privacy}",
        "followers_url": "https://api.github.com/users/Chiitoo/followers",
        "following_url": "https://api.github.com/users/Chiitoo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Chiitoo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Chiitoo",
        "id": 9367616,
        "login": "Chiitoo",
        "node_id": "MDQ6VXNlcjkzNjc2MTY=",
        "organizations_url": "https://api.github.com/users/Chiitoo/orgs",
        "received_events_url": "https://api.github.com/users/Chiitoo/received_events",
        "repos_url": "https://api.github.com/users/Chiitoo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Chiitoo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Chiitoo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Chiitoo",
        "user_view_type": "public"
    }
}